<div class="auth-container">
    <h2>Promjena šifre</h2>
    
    <div *ngIf="errorMessage" class="server-error-message">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="info-message">{{ successMessage }}</div>

    <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()">
        
        <div class="form-group">
            <label for="current_password">Trenutna šifra:</label>
            <input id="current_password" type="password" formControlName="current_password">
            <div *ngIf="control['current_password'].invalid && control['current_password'].touched" class="error-message">Trenutna šifra je obavezna.</div>
        </div>

        <div class="form-group">
            <label for="new_password">Nova šifra:</label>
            <input id="new_password" type="password" formControlName="new_password">
            <div *ngIf="control['new_password'].invalid && control['new_password'].touched" class="error-message">
                <span *ngIf="control['new_password'].errors?.['required']">Nova šifra je obavezna.</span>
                <span *ngIf="control['new_password'].errors?.['minlength']">Mora imati najmanje 6 karaktera.</span>
            </div>
        </div>
        
        <div class="form-group">
            <label for="confirm_new_password">Potvrda nove šifre:</label>
            <input id="confirm_new_password" type="password" formControlName="confirm_new_password">
            <div *ngIf="control['confirm_new_password'].invalid && control['confirm_new_password'].touched" class="error-message">Potvrda nove šifre je obavezna.</div>
        </div>

        <div *ngIf="passwordForm.errors?.['passwordsMismatch'] && passwordForm.touched" class="server-error-message">
            Nova šifra i potvrda se ne poklapaju.
        </div>

        <button type="submit" [disabled]="passwordForm.invalid">Promijeni šifru</button>

        <p class="links">
            <a routerLink="/home">Nazad na početnu</a>
        </p>
    </form>
</div>