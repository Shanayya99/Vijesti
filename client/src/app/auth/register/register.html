<div class="auth-container">
    <h2>Registracija novog korisnika</h2>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        
        <!-- Ime -->
        <div class="form-group">
            <label for="ime">Ime:</label>
            <input id="ime" type="text" formControlName="ime" required (blur)="control['ime'].markAsTouched()">
            <div *ngIf="control['ime'].invalid && control['ime'].touched" class="error-message">Ime je obavezno.</div>
        </div>

        <!-- Prezime -->
        <div class="form-group">
            <label for="prezime">Prezime:</label>
            <input id="prezime" type="text" formControlName="prezime" required (blur)="control['prezime'].markAsTouched()">
            <div *ngIf="control['prezime'].invalid && control['prezime'].touched" class="error-message">Prezime je obavezno.</div>
        </div>
        
        <!-- Korisničko ime -->
        <div class="form-group">
            <label for="username">Korisničko ime:</label>
            <input id="username" type="text" formControlName="username" required (blur)="control['username'].markAsTouched()">
            <div *ngIf="control['username'].invalid && control['username'].touched" class="error-message">
                <span *ngIf="control['username'].errors?.['required']">Korisničko ime je obavezno.</span>
                <span *ngIf="control['username'].errors?.['minlength']">Mora imati najmanje 3 karaktera.</span>
            </div>
        </div>

        <!-- Email -->
        <div class="form-group">
            <label for="email">Email:</label>
            <input id="email" type="email" formControlName="email" required (blur)="control['email'].markAsTouched()">
            <div *ngIf="control['email'].invalid && control['email'].touched" class="error-message">
                <span *ngIf="control['email'].errors?.['required']">Email je obavezan.</span>
                <span *ngIf="control['email'].errors?.['email']">Email format je neispravan.</span>
            </div>
        </div>

        <!-- Šifra -->
        <div class="form-group">
            <label for="password">Šifra:</label>
            <input id="password" type="password" formControlName="password" required (blur)="control['password'].markAsTouched()">
            <div *ngIf="control['password'].invalid && control['password'].touched" class="error-message">
                <span *ngIf="control['password'].errors?.['required']">Šifra je obavezna.</span>
                <span *ngIf="control['password'].errors?.['minlength']">Mora imati najmanje 6 karaktera.</span>
            </div>
        </div>

        <!-- Potvrda Šifre -->
        <div class="form-group">
            <label for="password_confirm">Potvrda šifre:</label>
            <input id="password_confirm" type="password" formControlName="password_confirm" required (blur)="control['password_confirm'].markAsTouched()">
            <div *ngIf="control['password_confirm'].invalid && control['password_confirm'].touched" class="error-message">Šifra je obavezna.</div>
        </div>
        
        <!-- Poruka o grešci podudarnosti šifri -->
        <div *ngIf="registerForm.errors?.['passwordsMismatch'] && registerForm.touched" class="server-error-message">
            Šifra i potvrda šifre moraju biti identične.
        </div>

        <!-- Greška sa servera ili komunikacije -->
        <div *ngIf="errorMessage" class="server-error-message">
            {{ errorMessage }}
        </div>

        <!-- Dugme za slanje (SUBMIT) -->
        <button type="submit" [disabled]="registerForm.invalid">Registruj se</button> 

        <p class="links">
            Već imate račun? <a routerLink="/login">Prijavi se</a>
        </p>
    </form>
</div>
