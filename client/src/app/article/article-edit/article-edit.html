<div class="main-content-container">
    <h2>Izmjena Članka (ID: {{ articleId }})</h2>
    
    <div *ngIf="loading" class="info-message">Učitavanje podataka...</div>
    <div *ngIf="errorMessage" class="server-error-message">{{ errorMessage }}</div>
    <div *ngIf="successMessage" class="info-message">{{ successMessage }}</div>

    <form [formGroup]="articleForm" (ngSubmit)="onSubmit()">
        
        <div class="form-group">
            <label for="naslov">Naslov članka:</label>
            <input id="naslov" type="text" formControlName="naslov" required>
            <div *ngIf="articleForm.get('naslov')?.invalid && articleForm.get('naslov')?.touched" class="error-message">Naslov je obavezan.</div>
        </div>

        <div class="form-group">
            <label for="deskripcija">Opis/Sadržaj:</label>
            <textarea id="deskripcija" formControlName="deskripcija" rows="8" required></textarea>
            <div *ngIf="articleForm.get('deskripcija')?.invalid && articleForm.get('deskripcija')?.touched" class="error-message">Opis je obavezan.</div>
        </div>

        <div class="form-group">
            <label for="img">URL Slike:</label>
            <input id="img" type="url" formControlName="img" required>
            <div *ngIf="articleForm.get('img')?.invalid && articleForm.get('img')?.touched" class="error-message">
                Format URL-a nije ispravan.
            </div>
            <img [src]="articleForm.get('img')?.value" *ngIf="articleForm.get('img')?.value" 
                 alt="Trenutna slika" style="max-width: 200px; margin-top: 15px; border-radius: 4px;">
        </div>
        
        <div class="article-metadata" *ngIf="originalArticle">
            <span>Kreirano: {{ originalArticle.created_at | date:'medium' }}</span>
            <span *ngIf="originalArticle.updated_at" class="updated-date"> <br> Ažurirano: {{ originalArticle.updated_at | date:'medium' }}</span>
        </div>

        <button type="submit" class="btn-update" 
                [disabled]="articleForm.invalid || loading">
            Ažuriraj Članak
        </button>

        <p class="links"><a routerLink="/novosti">Nazad na Listu</a></p>
    </form>
</div>